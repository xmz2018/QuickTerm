# 智能知识查询工具

这是一个使用 Vite、React、TypeScript 和 shadcn/ui 构建的现代化前端应用。它旨在帮助用户快速查询名词概念，自动分类整理，并构建个人知识库。

## 功能

*   **知识查询**: 用户可以输入任何名词或概念，应用会通过调用外部 API（默认为 OpenAI）来获取并显示详细的解释。
*   **自动分类**: 如果启用，应用会自动为每个查询结果分配一个预定义的类别。
*   **历史记录**: 所有确认的查询都会被保存在本地，用户可以随时查看、搜索和筛选。
*   **数据导出**: 用户可以将他们的查询历史导出为 JSON 文件，以便备份或在其他地方使用。
*   **高度可配置**: 用户可以在设置页面中自定义 API 端点、密钥和模型，使其能够与任何兼容 OpenAI 的 API 服务一同工作。

## 项目结构

*   `public/`: 包含静态资源。
*   `src/`: 包含所有源代码。
    *   `components/`: 包含所有 React 组件。
        *   `ui/`: 包含由 shadcn/ui 生成的 UI 组件。
        *   `QueryInterface.tsx`: 查询界面。
        *   `HistoryPanel.tsx`: 历史记录面板。
        *   `SettingsPanel.tsx`: 设置面板。
    *   `hooks/`: 包含自定义 React 钩子。
    *   `lib/`: 包含工具函数。
    *   `pages/`: 包含页面级组件。
        *   `Index.tsx`: 应用主页。
        *   `NotFound.tsx`: 404 页面。
    *   `App.tsx`: 应用的根组件，负责路由和全局提供者的设置。
    *   `main.tsx`: 应用的入口点。

## 使用 Docker 部署

1.  **安装 Docker**:
    *   确保您的系统上已安装 [Docker](https://www.docker.com/get-started) 和 [Docker Compose](https://docs.docker.com/compose/install/)。

2.  **构建并运行容器**:
    *   在项目根目录下，运行以下命令：
        ```sh
        docker-compose up -d --build
        ```
    *   这将会构建 Docker 镜像并在后台启动容器。

3.  **访问应用**:
    *   在浏览器中打开 `http://localhost:8333`。

4.  **停止容器**:
    *   要停止应用，请运行：
        ```sh
        docker-compose down
        ```

## 功能可用性验证

1.  **启动应用**:
    *   在项目根目录下运行 `npm install` 来安装所有依赖项。
    *   运行 `npm run dev` 来启动开发服务器。
    *   在浏览器中打开 `http://localhost:5173` (或终端中显示的任何其他端口)。

2.  **配置 API**:
    *   在应用中，导航到“设置”选项卡。
    *   输入您的 OpenAI API 密钥（或其他兼容的 API 密钥）。
    *   点击“测试”按钮以验证连接。

3.  **进行查询**:
    *   导航到“查询”选项卡。
    *   在输入框中输入一个词（例如，“人工智能”）。
    *   点击“查询”按钮。
    *   结果应该会显示在下方。

4.  **保存和查看历史记录**:
    *   在查询结果出现后，点击“确认保存”。
    *   导航到“历史”选项卡，您应该能看到刚刚保存的查询。

## 优化方向

*   **状态管理库**: 目前，状态管理是通过 `useState` 和 `useEffect` 以及 `localStorage` 手动完成的。对于更复杂的应用，可以考虑使用像 Redux Toolkit 或 Zustand 这样的状态管理库来更有效地管理全局状态。
*   **代码分割**: 对于较大的应用，可以实现代码分割，只在需要时才加载特定的组件或页面。Vite 本身支持通过动态 `import()` 进行代码分割。
*   **错误处理**: 虽然已经有一些基本的错误处理，但可以进一步改进，为用户提供更具体、更有帮助的错误信息。
*   **测试**: 项目目前缺少自动化测试。可以添加单元测试（例如，使用 Vitest 和 React Testing Library）和端到端测试（例如，使用 Cypress 或 Playwright）来确保代码的质量和可靠性。
*   **可访问性 (a11y)**: 虽然 `shadcn/ui` 在构建时考虑了可访问性，但仍应进行全面的可访问性审计，以确保所有用户都能使用该应用。

## 问题识别

*   **API 密钥存储**: API 密钥目前存储在 `localStorage` 中。虽然这对于本地开发来说很方便，但在生产环境中，将敏感数据存储在客户端是不安全的。更好的方法是通过后端代理来处理 API 请求，这样 API 密钥就永远不会暴露给客户端。由于您提到仅在本地封闭环境中使用，因此当前实现是可接受的。
*   **对外部 API 的依赖**: 应用的核心功能完全依赖于外部 API。如果 API 不可用或其格式发生变化，应用将无法正常工作。
*   **无后端**: 所有数据都存储在客户端的 `localStorage` 中。这意味着数据与特定的浏览器和设备绑定，无法在多台设备之间同步。
